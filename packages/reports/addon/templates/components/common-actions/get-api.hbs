{{!-- Copyright 2020, Yahoo Holdings Inc. Licensed under the terms of the MIT license. See accompanying LICENSE.md file for terms. --}}
<div class="get-api" ...attributes>
  {{!-- Check wether we need to disable the button click --}}
  <button class="get-api__btn {{@buttonClassNames}}" type="button" disabled={{@disabled}}
    {{on "click" (queue (optional @beforeAction) (toggle "showModal" this))}}>
    {{yield}}
  </button>

  <DenaliModal class="get-api-modal-container"
    @isOpen={{this.showModal}}
    @onClose={{queue (toggle "showModal" this) this.resetNotifications}}
    ...attributes as | modal |
  >
      <modal.Header class="navi-modal__header">
        <div class="navi-modal__header--primary">API Query</div>
      </modal.Header>
      <modal.Content>
        <input class="navi-modal__input" value={{this.requestUrl}} readonly>

        {{!-- Buttons --}}
        <div class="btn-container">
          <CopyButton
            class="button is-solid"
            @clipboardText={{this.requestUrl}}
            @success={{toggle "successNotification" this}}
            @error={{toggle "errorNotification" this}}
          >
            Copy Link
          </CopyButton>
          {{#if this.isRequestURL}}
            <a class="button is-outline" href={{this.requestUrl}} target="_blank" rel="noopener noreferrer">Run API Query in New Tab</a>
          {{/if}}
          <DenaliButton class="is-outline" {{on "click" (queue (toggle "showModal" this) this.resetNotifications)}}>Cancel</DenaliButton>
        </div>
      </modal.Content>
  </DenaliModal>
</div>
