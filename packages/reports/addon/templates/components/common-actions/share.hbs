{{!-- Copyright 2020, Yahoo Holdings Inc. Licensed under the terms of the MIT license. See accompanying LICENSE.md file for terms. --}}
<div ...attributes>
  {{!-- Check if in need of disabling the button on click --}}
  <button class="btn" type="button" disabled={{@disabled}} {{on "click" (toggle "showModal" this)}}>
    {{yield}}
  </button>

  <DenaliModal @isOpen={{this.showModal}} @onClose={{queue (toggle "showModal" this) this.resetNotifications}}
  ...attributes as |modal|>
      <modal.Header class="navi-modal-header">
        <div class="primary-header">Share "{{this.pageTitle}}"</div>
      </modal.Header>
      <modal.Content>
        {{!-- Notification center --}}
        {{#if this.errorNotification}}
          <div class="modal-notification alert info">
            <NaviIcon @icon="exclamation-circle" />
            <div class="notification-text">Please Type âŒ˜-c to copy</div>
            <NaviIcon @icon="times" class="notification-remove-icon clickable" {{on "click" (toggle "errorNotification" this)}} />
          </div>
        {{else}}
          {{#if this.successNotification}}
            <div class="modal-notification alert success">
              <NaviIcon @icon="check" />
              <div class="notification-text">Success! The link has been copied to your clipboard</div>
              <NaviIcon @icon="times" class="notification-remove-icon clickable" {{on "click" (toggle "successNotification" this)}} />
            </div>
          {{else}}
            <div class="secondary-header">Select the Copy button to copy to clipboard.</div>
          {{/if}}
        {{/if}}
        <DenaliInput class="share-input" value={{this.currentUrl}} readonly />

        {{!-- Buttons --}}
        <CopyButton
          class="button is-solid m-5"
          @clipboardText={{this.currentUrl}}
          @success={{toggle "successNotification" this}}
          @error={{toggle "errorNotification" this}}
        >
          Copy Link
        </CopyButton>
        <DenaliButton class="is-outline m-5" {{on "click" (queue (toggle "showModal" this) this.resetNotifications)}}>Cancel</DenaliButton>
      </modal.Content>
  </DenaliModal>
</div>
